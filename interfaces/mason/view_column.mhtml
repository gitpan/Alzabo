<table width="100%" cellspacing="5">
 <tr valign="top">
  <td>
   <table width="100%" cellspacing="5">
    <tr>
     <td>
<form action="change_column_name<% Alzabo::Config::mason_extension() %>">
 <input type="hidden" name="schema" value="<% $s->name %>">
 <input type="hidden" name="table" value="<% $t->name %>">
 <input type="hidden" name="column" value="<% $c->name %>">
 <input type="text" name="name" value="<% $c->name %>">
 <input type="submit" value="Change name">
</form>
     </td>
<form action="change_column<% Alzabo::Config::mason_extension() %>">
 <input type="hidden" name="schema" value="<% $s->name %>">
 <input type="hidden" name="table" value="<% $t->name %>">
 <input type="hidden" name="column" value="<% $c->name %>">

    <tr valign="top">
     <td>Change type:</td>
    </tr>
    <tr>
     <td>
      <select name="type">
% my $selected;
% foreach ( ( $is_extended_type ? ('') : () ), $s->rules->column_types ) {
       <option value="<% $_ %>" <% $c->type eq $_ && 'selected' %>><% $_ %></option>
% }
      </select>
% if ( $s->rules->feature('extended_column_types') ) {
      <br>
      Enter your type if it is not on the list:<br>
      <input type="textfield" name="extended_type" value="<% $is_extended_type && $c->type %>">
% }
     </td>
    </tr>

    <tr valign="top">
     <td>Change length/precision:</td>
    </tr>
    <tr>
     <td><input type="textfield" name="length" value="<% defined $c->length ? $c->length : '' %>" size="5">,
         <input type="textfield" name="precision" value="<% defined $c->precision ? $c->precision : '' %>" size="5"></td>
    </tr>

    <tr valign="top">
     <td>Change default:</td>
    </tr>
    <tr>
     <td><input type="textfield" name="default" value="<% defined $c->default ? $c->default : '' %>" size="20"></td>
    </tr>

    <tr>
     <td>Change/add attributes:<br>
         (to delete an attribute simply erase it)
     </td>
    </tr>
% foreach my $a (sort $c->attributes) {
    <tr>
     <td>
      <input type="hidden" name="old_attributes" value="<% $a %>">
      <input type="textfield" name="attributes" value="<% $a %>" size="20">
     </td>
    </tr>
% }
    <tr>
     <td><input type="textfield" name="attributes" size="20"></td>
    </tr>
    <tr>
     <td><input type="textfield" name="attributes" size="20"></td>
    </tr>

    <tr>
     <td>
      Allow nulls: <input type="checkbox" name="nullable" value="1" <% $c->nullable ? 'checked="checked"' : '' %>><br>
      Primary key: <input type="checkbox" name="primary_key" value="1" <% $c->is_primary_key ? 'checked="checked"' : '' %>><br>
      Sequenced: <input type="checkbox" name="sequenced" value="1" <% $c->sequenced ? 'checked="checked"' : '' %>>
     </td>
    </tr>

    <tr>
     <td><input type="submit" value="Submit"></td>
    </tr>
</form>

    </tr>
   </table>
  </td>
  <td>
   <table width="100%" cellspacing="5">
    <tr>
     <td>
<form action="delete_column<% Alzabo::Config::mason_extension() %>">
 <input type="hidden" name="schema" value="<% $s->name %>">
 <input type="hidden" name="table" value="<% $t->name %>">
 <input type="hidden" name="column" value="<% $c->name %>">
 <input type="submit" value="Delete column">
</form>
     </td>
    </tr>
    <tr>
% if ( (my @cols = $t->columns) > 2 ) {
<form action="move_column<% Alzabo::Config::mason_extension() %>">
 <input type="hidden" name="schema" value="<% $s->name %>">
 <input type="hidden" name="table" value="<% $t->name %>">
 <input type="hidden" name="column" value="<% $c->name %>">
    <tr>
     <td>
      <h2>Move column</h2>
      After column:
      <select name="after">
%   foreach my $c (@cols) {
      <option value="<% $c->name %>"><% $c->name %></option>
%   }
      </select>
     </td>
    </tr>
    <tr>
     <td>
      <input type="submit" value="Submit">
     </td>
    </tr>
</form>
% } else {
    &nbsp;
% }
     </td>
    </tr>
   </table>

  </td>
 </tr>
</table>

<%args>
$s
$t
$c
</%args>
<%init>
my $is_extended_type = $s->rules->feature('extended_column_types') && ! grep { $c->type eq $_ } $s->rules->column_types;
</%init>
